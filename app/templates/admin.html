{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}
    <h1>Admin Commands</h1>

    <button onclick="runCommand('/admin/clear_realms')">Clear Realms</button>
    <button onclick="runCommand('/admin/update_realms')">Update Realms</button>
    <button onclick="runCommand('/admin/update_tables')">Update Tables</button>

    <div id="result" style="margin-top:20px; font-weight:bold;"></div>

    <script>
        async function runCommand(endpoint) {
            try {
                const res = await fetch(endpoint, { method: 'POST' });
                if (!res.ok) throw new Error("Request failed");
                const data = await res.json();
                document.getElementById('result').innerText = data.status;
            } catch (err) {
                document.getElementById('result').innerText = "Error running command!";
            }
        }
    </script>
{% endblock %}
